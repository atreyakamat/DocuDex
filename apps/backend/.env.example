# =============================================================================
# DocuDex — Backend Environment Variables
# =============================================================================
#
# MINIMUM REQUIRED TO START (PostgreSQL only, no Redis, no AI service):
#
#   DATABASE_URL=postgresql://docudex:docudex_pass@localhost:5432/docudex
#   JWT_SECRET=change_me_to_a_long_random_string
#
# Then run:
#   npm run dev --workspace=apps/backend
#
# =============================================================================

NODE_ENV=development
PORT=5000

# =============================================================================
# DATABASE (REQUIRED)
# =============================================================================
DATABASE_URL=postgresql://docudex:docudex_pass@localhost:5432/docudex
DB_HOST=localhost
DB_PORT=5432
DB_NAME=docudex
DB_USER=docudex
DB_PASSWORD=docudex_pass

# Quick PostgreSQL setup (run these in psql as superuser):
#   CREATE USER docudex WITH PASSWORD 'docudex_pass';
#   CREATE DATABASE docudex OWNER docudex;
# Schema is auto-applied from src/db/schema.sql on first start.

# =============================================================================
# REDIS (OPTIONAL)
# =============================================================================
# If Redis is NOT running, the app still works with these caveats:
#   - Refresh tokens cannot be revoked on logout (stateless JWT fallback)
#   - Email OTP verification will be unavailable (returns 503)
# To run WITHOUT Redis, comment out or remove this line:
REDIS_URL=redis://localhost:6379

# =============================================================================
# JWT — change in production!
# =============================================================================
JWT_SECRET=your_super_secret_jwt_key_change_in_production
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# =============================================================================
# FILE STORAGE
# =============================================================================
STORAGE_TYPE=local
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800

# =============================================================================
# AI SERVICE (OPTIONAL)
# =============================================================================
# If not running, uploaded documents stay in PROCESSING status — no crash.
# Start with: cd apps/ai-service && uvicorn main:app --reload --port 8000
AI_SERVICE_URL=http://localhost:8000

# =============================================================================
# CORS
# =============================================================================
FRONTEND_URL=http://localhost:5173

# =============================================================================
# EMAIL (OPTIONAL — needed only for OTP email verification)
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
